# Инструкция по сборке исполняемого файла и установщика

## Шаг 1: Подготовка окружения

1. Убедитесь, что у вас установлен Python 3.8+ и все зависимости:
```bash
pip install -r requirements.txt
pip install pyinstaller
```

## Шаг 2: Сборка исполняемого файла

### Вариант A: Использование batch файла (Windows)
```bash
build.bat
```

### Вариант B: Ручная сборка
```bash
pyinstaller build_exe.spec
```

После сборки исполняемый файл будет находиться в папке `dist\PetriNetApp.exe`

## Шаг 3: Создание установщика Inno Setup

1. Установите [Inno Setup](https://jrsoftware.org/isdl.php) (бесплатно)

2. Откройте файл `setup.iss` в Inno Setup Compiler

3. Нажмите "Build" -> "Compile" (или F9)

4. Установщик будет создан в папке `installer\PetriNetApp_Setup.exe`

## Важные замечания

### Graphviz
- Graphviz уже включен в сборку через spec файл
- Если возникают проблемы с Graphviz, убедитесь, что папка `Graphviz-14.1.1-win32` находится в корне проекта

### Зависимости
- PySide6 будет автоматически включен PyInstaller
- NetworkX и pydot также будут включены
- Все необходимые DLL файлы будут собраны автоматически

### Размер файла
- Исполняемый файл может быть довольно большим (50-100 МБ) из-за включения всех зависимостей
- Это нормально для PySide6 приложений

### Тестирование
Перед созданием установщика обязательно протестируйте `dist\PetriNetApp.exe`:
- Проверьте, что приложение запускается
- Проверьте все функции (сохранение, загрузка, разные режимы размещения)
- Убедитесь, что Graphviz работает

## Устранение проблем

### Ошибка "ModuleNotFoundError"
Добавьте недостающий модуль в `hiddenimports` в файле `build_exe.spec`

### Graphviz не работает
Убедитесь, что в spec файле правильно указан путь к Graphviz:
```python
datas=[
    ('Graphviz-14.1.1-win32/bin', 'Graphviz-14.1.1-win32/bin'),
],
```

### Большой размер exe
Можно использовать UPX для сжатия (уже включено в spec файл), но это может вызвать проблемы с антивирусами.

### Антивирус блокирует
Некоторые антивирусы могут блокировать PyInstaller exe файлы. Это ложное срабатывание. Можно:
- Добавить в исключения
- Использовать код-подпись (требует сертификат)

